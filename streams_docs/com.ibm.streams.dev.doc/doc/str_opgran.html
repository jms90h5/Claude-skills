<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="22.0">
    <head><link rel="shortcut icon" href="../../favicon-light.png"/><link rel="icon" href="../../favicon-light.png"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="DC.rights.owner" content="(C) Copyright 2025"/><meta name="copyright" content="(C) Copyright 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="concept"/><meta name="description" content="To design effective stream applications, operators need to be sized appropriately. Effective operators perform a single task."/><meta name="DC.relation" content="../../com.ibm.streams.dev.doc/doc/str_bestpractices.html"/><meta name="DC.relation" content="../../com.ibm.streams.dev.doc/doc/dev-container.html"/><meta name="DC.relation" content="../../com.ibm.streams.dev.doc/doc/writingapplications.html"/><meta name="DC.relation" content="../../com.ibm.streams.ref.doc/doc/placementpartitioncolocation.html"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="opgran"/><meta name="DC.language" content="en-us"/>        
      <title>Operator granularity</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../../"/><meta name="wh-toc-id" content="opgran-d41691e5413"/><meta name="wh-source-relpath" content="com.ibm.streams.dev.doc/doc/str_opgran.dita"/><meta name="wh-out-relpath" content="com.ibm.streams.dev.doc/doc/str_opgran.html"/>

    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../../oxygen-webhelp/app/options/properties.js?buildId=20250729150623"></script>
    <script src="../../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../../oxygen-webhelp/app/search/index/keywords.js?buildId=20250729150623"></script>
    <script defer="defer" src="../../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/template/cobalt.css?buildId=2024012323"/><link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/template/params/args.css/cobalt.css?buildId=2024012323"/><link rel="stylesheet" type="text/css" href="../../cobalt.css"/></head>

    <body id="opgran" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
       <!-- <whc:include_html href="${webhelp.fragment.header}"/>-->
        <header class="navbar navbar-default wh_header_tpc" data-whc_version="23.1">
    <div class="container-fluid">
        <div class="wh_header_flex_container_tpc navbar-nav navbar-expand-md navbar-dark"> 
            <!--<div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    <whc:include_html href="${webhelp.fragment.before.logo_and_title}"/>-->
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <!--<whc:webhelp_logo class="d-none d-sm-block"/>
                    <whc:webhelp_publication_title/>
                    <whc:include_html href="${webhelp.fragment.after.logo_and_title}"/>
                </div>-->
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            <!--</div>-->

            <div class="wh_logo_tpc">
                <a href="/index.html"><img width="200px" height="24px" src="/media/home_button.svg" style="margin-top: 1em;"/></a>
        </div>
        <!-- Search form -->
        <div class=" wh_search_input navbar-form wh_main_page_search search " role="form">
            
            
            
            
            
            <!--<div class="wh_welcome">
                <whc:include_html href="${webhelp.fragment.welcome}"/>
            </div>    -->      
            <form id="searchForm" method="get" role="search" action="../../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div></form>
            
            
            
            
        </div>
    </div>
</div></header>

        
         
        

        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../../index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="dev-container"><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/dev-container.html">Developing</a><div class="wh-tooltip"><p class="shortdesc">Learn about different Teracloud Streams tools and features to write, compile, run, and    test streams applications.</p></div></div></div></li><li><div class="topicref" data-id="writingapplications"><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/writingapplications.html">Developing <span class="keyword">stream applications</span></a><div class="wh-tooltip"><p class="shortdesc">Try out tutorials and explore details about stream application development, SPL features,     and best practices.</p></div></div></div></li><li><div class="topicref" data-id="bestpractices"><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_bestpractices.html">Best practices</a><div class="wh-tooltip"><p class="shortdesc">Use these tips to write operators that perform effectively in their application, and in other applications.</p></div></div></div></li><li class="active"><div class="topicref" data-id="opgran"><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_opgran.html">Operator granularity</a><div class="wh-tooltip"><p class="shortdesc">To design effective <span class="keyword">stream applications</span>, operators need to be sized appropriately. Effective operators perform a single task. </p></div></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        <!-- External resource link -->
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <!-- Expand/Collapse publishing TOC 
                             The menu button for mobile devices is copied in the output only when the publication TOC is available
                        -->
                        <button type="button" data-target="#wh_publication_toc" id="wh_toc_button" data-toggle="collapse" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        
                        <nav id="wh_publication_toc" class="collapse col-lg-3 col-md-3 col-sm-12 d-md-block d-print-none" aria-label="Table of Contents Container">
                            <div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="false"><div data-tocid="kc_welcome-d41691e179" class="topicref" data-id="kc_welcome" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action kc_welcome-d41691e179-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.welcome.doc/doc/kc-homepage.html" id="kc_welcome-d41691e179-link">Welcome</a><div class="wh-tooltip"><p class="shortdesc">Learn about the core capabilities of <span class="keyword">TeracloudÂ® Streams</span>, its architecture, and key concepts.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="installstreams-container-d41691e427" class="topicref" data-id="installstreams-container" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action installstreams-container-d41691e427-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.install.doc/doc/installstreams-container.html" id="installstreams-container-d41691e427-link">Installing</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">Use this information to install, upgrade, and uninstall the <span class="keyword">TeracloudÂ® 					Streams</span> product.</span></p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="ibminfospherestreams-containercfg-d41691e1501" class="topicref" data-id="ibminfospherestreams-containercfg" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ibminfospherestreams-containercfg-d41691e1501-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.cfg.doc/doc/ibminfospherestreams-containercfg.html" id="ibminfospherestreams-containercfg-d41691e1501-link">Configuring</a><div class="wh-tooltip"><p class="shortdesc">Create a basic or an enterprise domain which is a single point for configuring and       managing common resources, security, and instances.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="containeradmin-d41691e2701" class="topicref" data-id="containeradmin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action containeradmin-d41691e2701-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.admin.doc/doc/ibminfospherestreams-containeradmin.html" id="containeradmin-d41691e2701-link">Administering</a><div class="wh-tooltip"><p class="shortdesc">Administer the product by using the <span class="keyword">TeracloudÂ® 					Streams</span> graphical user interface, APIs, or the <code class="ph codeph">streamtool</code> command-line   interface.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="dev-container-d41691e3979" class="topicref" data-id="dev-container" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action dev-container-d41691e3979-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/dev-container.html" id="dev-container-d41691e3979-link">Developing</a><div class="wh-tooltip"><p class="shortdesc">Learn about different Teracloud Streams tools and features to write, compile, run, and    test streams applications.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="streaming_application_basics-d41691e3994" class="topicref" data-id="streaming_application_basics" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action streaming_application_basics-d41691e3994-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/streaming_application_basics.html" id="streaming_application_basics-d41691e3994-link">Development concepts</a><div class="wh-tooltip"><p class="shortdesc">Development of stream applications consists of several components such as operators,         streams, tuples, Streams Processing Language, toolkits, and         more.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="writingapplications-d41691e4218" class="topicref" data-id="writingapplications" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action writingapplications-d41691e4218-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/writingapplications.html" id="writingapplications-d41691e4218-link">Developing <span class="keyword">stream applications</span></a><div class="wh-tooltip"><p class="shortdesc">Try out tutorials and explore details about stream application development, SPL features,     and best practices.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tut-container-d41691e4232" class="topicref" data-id="tut-container" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tut-container-d41691e4232-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.tutorials.doc/doc/tut-container.html" id="tut-container-d41691e4232-link">Tutorials</a><div class="wh-tooltip"><p class="shortdesc">Learn how to create simple <span class="keyword">stream applications</span> by completing the tutorials.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="compiler-container-d41691e4508" class="topicref" data-id="compiler-container" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action compiler-container-d41691e4508-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/compiler-container.html" id="compiler-container-d41691e4508-link">Compiling <span class="keyword">stream applications</span></a><div class="wh-tooltip"><p class="shortdesc">The <span class="keyword">Streams Processing Language (SPL)</span> Compiler is called <span class="ph"><span class="keyword cmdname">sc</span></span> and is included with the <span class="keyword">TeracloudÂ® Streams</span> installation package. You compile SPL to create files to run on your <span class="keyword">Teracloud Streams instance</span>.</p></div></div></div></li><li role="treeitem"><div data-tocid="applicationbundle-d41691e4676" class="topicref" data-id="applicationbundle" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/applicationbundle.html" id="applicationbundle-d41691e4676-link">Application bundle files</a><div class="wh-tooltip"><p class="shortdesc">An <span class="keyword">application bundle file</span> is a single, relocatable file that contains all the artifacts that are needed to run your application. You submit a <span class="keyword">application bundle file</span> to run on an instance.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="spl_features-d41691e4693" class="topicref" data-id="spl_features" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action spl_features-d41691e4693-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/spl_features.html" id="spl_features-d41691e4693-link">SPL features</a><div class="wh-tooltip"><p class="shortdesc"><span class="keyword">TeracloudÂ® 					Streams</span> provides features and functions to help you write your applications to fulfill your         business needs.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="bestpractices-d41691e5297" class="topicref" data-id="bestpractices" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action bestpractices-d41691e5297-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_bestpractices.html" id="bestpractices-d41691e5297-link">Best practices</a><div class="wh-tooltip"><p class="shortdesc">Use these tips to write operators that perform effectively in their application, and in other applications.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="nameconv-d41691e5308" class="topicref" data-id="nameconv" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action nameconv-d41691e5308-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_nameconv.html" id="nameconv-d41691e5308-link">Naming conventions</a><div class="wh-tooltip"><p class="shortdesc">Following standardized naming practices improves program readability.</p></div></div></div></li><li role="treeitem" class="active"><div data-tocid="opgran-d41691e5413" class="topicref" data-id="opgran" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_opgran.html" id="opgran-d41691e5413-link">Operator granularity</a><div class="wh-tooltip"><p class="shortdesc">To design effective <span class="keyword">stream applications</span>, operators need to be sized appropriately. Effective operators perform a single task. </p></div></div></div></li><li role="treeitem"><div data-tocid="streamgraphgran-d41691e5428" class="topicref" data-id="streamgraphgran" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_streamgraphgran.html" id="streamgraphgran-d41691e5428-link">Stream graph granularity</a><div class="wh-tooltip"><p class="shortdesc">Design stream graphs with readability and reusability in mind, similar to the process you follow when you design operators.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="portmutability-d41691e5439" class="topicref" data-id="portmutability" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action portmutability-d41691e5439-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_portmutability.html" id="portmutability-d41691e5439-link">Port mutability</a><div class="wh-tooltip"><p class="shortdesc">When you define operator models while you develop a primitive operator, you must configure the mutability of tuples that flow through each input port and output port in the operator model. </p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="errorhandl-d41691e5505" class="topicref" data-id="errorhandl" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action errorhandl-d41691e5505-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_errorhandl.html" id="errorhandl-d41691e5505-link">Error handling</a><div class="wh-tooltip"><p class="shortdesc">Operators might need to contend with errors in the form of erroneous input tuples, bad parameters, or unexpected values that are returned from functions. Recognizing errors is often easy. Error handling is more subtle and depends on where the error occurs.</p></div></div></div></li><li role="treeitem"><div data-tocid="outassign-d41691e5566" class="topicref" data-id="outassign" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/str_outassign.html" id="outassign-d41691e5566-link">Output assignments</a><div class="wh-tooltip"><p class="shortdesc">When you write a generic primitive operator, you can allow assignments to output tuple attributes through the output clause. Output assignments can be either plain assignments or assignments with custom output functions.</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="perfrecforsplapplicationprogrammers-d41691e5577" class="topicref" data-id="perfrecforsplapplicationprogrammers" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action perfrecforsplapplicationprogrammers-d41691e5577-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/perf_rec_spl_app_programmers.html" id="perfrecforsplapplicationprogrammers-d41691e5577-link">Performance recommendations</a><div class="wh-tooltip"><p class="shortdesc">You can use these performance options and recommendations to improve your <span class="keyword">stream application</span>.</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="creatingnativefunctions-d41691e5698" class="topicref" data-id="creatingnativefunctions" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action creatingnativefunctions-d41691e5698-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/creatingnativefunctions.html" id="creatingnativefunctions-d41691e5698-link"><span class="ph">Developing native functions</span></a><div class="wh-tooltip"><p class="shortdesc">Extend SPL's computational capabilities by creating native functions     written in C++ or Java.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="developing_operators-d41691e5772" class="topicref" data-id="developing_operators" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action developing_operators-d41691e5772-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/developing_operators.html" id="developing_operators-d41691e5772-link">Developing custom operators</a><div class="wh-tooltip"><p class="shortdesc">Create custom operators if shipped toolkits do not provide the necessary logic or   behavior needed for your <span class="keyword">stream applications</span>.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="creating_toolkits-d41691e7044" class="topicref" data-id="creating_toolkits" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action creating_toolkits-d41691e7044-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/creating_toolkits.html" id="creating_toolkits-d41691e7044-link">Developing custom toolkits</a><div class="wh-tooltip"><p class="shortdesc">Bundle and reuse custom functions and operators across several <span class="keyword">stream applications</span> by creating custom toolkits.</p></div></div></div></li><li role="treeitem"><div data-tocid="enabling-streams-application-service-d41691e7457" class="topicref" data-id="enabling-streams-application-service" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/enabling-streams-data-exchange.html" id="enabling-streams-application-service-d41691e7457-link">Enabling Streams data exchange</a><div class="wh-tooltip"><p class="shortdesc"><span class="keyword">TeracloudÂ® 					Streams</span> provides a data exchange REST API for inserting and retrieving tuples within a job to             easily integrate with other data services and external applications. Stream applications             can enable the data exchange feature by using one or more Endpoint             operators.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="spldebugger-container-d41691e7472" class="topicref" data-id="spldebugger-container" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action spldebugger-container-d41691e7472-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.dev.doc/doc/spldebugger-container.html" id="spldebugger-container-d41691e7472-link">Debugging <span class="keyword">stream applications</span></a><div class="wh-tooltip"><p class="shortdesc">Debug stream applications using the interactive, command line-based <span class="keyword">Streams Debugger</span> (<code class="ph codeph">sdb</code>).</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshootingforproduct-d41691e8087" class="topicref" data-id="troubleshootingforproduct" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshootingforproduct-d41691e8087-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.pd.doc/doc/ts_parent.html" id="troubleshootingforproduct-d41691e8087-link">Troubleshooting</a><div class="wh-tooltip"><p class="shortdesc">Resolve problems with <span class="keyword">TeracloudÂ® Streams</span> using the troubleshooting tools provided with the product as well as the resources             offered by Teracloud Support.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="reference-container-d41691e60879" class="topicref" data-id="reference-container" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action reference-container-d41691e60879-link" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.ref.doc/doc/reference-container.html" id="reference-container-d41691e60879-link">Reference</a><div class="wh-tooltip"><p class="shortdesc">Find details on the SPL language, toolkits, APIs, commands, and more.</p></div></div></div></li><li role="treeitem"><div data-tocid="glossary-d41691e72254" class="topicref" data-id="glossary" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../com.ibm.streams.glossary.doc/doc/glossary_streams.html" id="glossary-d41691e72254-link">Glossary</a><div class="wh-tooltip"><p class="shortdesc">Use this glossary to find terms and definitions for <span class="keyword">TeracloudÂ® 					Streams</span>.</p></div></div></div></li></ul></div>
                        </nav>
                        
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic concept/concept topic concept" role="article" aria-labelledby="ariaid-title1">
<h1 class="- topic/title title topictitle1" id="ariaid-title1">Operator granularity</h1>





<div class="- topic/body concept/conbody body conbody"><p class="- topic/shortdesc shortdesc">To design effective <span class="- topic/keyword keyword">stream applications</span>,
operators need to be sized appropriately. Effective operators perform
a single task. </p>
  
<p class="- topic/p p">Writing operators that accomplish one task
   makes designing <span class="- topic/keyword keyword">stream applications</span> easier. The applications are easier to read, and there is more potential to reuse those
   operators in other applications. However, programmers who are new to the streams programming
   model might not be able to recognize what is the best operator granularity. Programmers who are
   used to writing applications in languages such as C++ and <span class="- topic/tm tm">Java<span class="- topic/tmmark tmmark ">â¢</span></span> might be tempted to write <span class="- topic/keyword keyword">stream applications</span> with large operators that perform multiple conceptual tasks that use many expressions.
   Well-designed <span class="- topic/keyword keyword">stream applications</span> tend to be more declarative (say what you want) rather than imperative (say how to do it).</p>
<p class="- topic/p p">Consider an application that reads telephone records from a source.
Individual records are on separate lines of text, and in the form <kbd class="+ topic/ph sw-d/userinput ph userinput">"&lt;name&gt;
&lt;source number&gt; &lt;destination number&gt;"</kbd>. Assume that
the data is read from a file called <span class="+ topic/ph sw-d/filepath ph filepath">calls.txt</span>. The
task is to convert this string of text (unstructured data) into tuples
(structured data), and to filter out all numbers that come from the
540 area code.</p>
<p class="- topic/p p">Consider this first attempt:</p>
<div class="- topic/p p"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>01: composite Main {
02:   type CDR = rstring name, rstring src, rstring dest;
03:   graph
04:     stream&lt;rstring line&gt; RawLine = FileSource() {  
05:       param  
06:         file: "calls.txt";  
07:         format: line;  
08:     }  
09: 
10:     stream&lt;CDR&gt; Processed = Custom(RawLine) { 
11:       logic 
12:         onTuple RawLine: { 
13:           list&lt;rstring&gt; tokens = tokenize(line, " ", false); 
14:           if (findFirst(tokens[1], "540")) == 0) { 
15:             submit({name = tokens[0], src = tokens[1], dest = tokens[2]}); 
16:           } 
17:         } 
18:     } 
19: }
</code></pre></div>
<p class="- topic/p p">This application defines a tuple type named <kbd class="+ topic/ph sw-d/userinput ph userinput">CDR</kbd> (call
detail record). This type uses strings to represent names, and source
and destination phone numbers (line 2). Next, the <span class="+ topic/keyword pr-d/apiname keyword apiname">FileSource</span> operator
from the SPL Standard Toolkit reads lines from the data file (lines
4-8). The <span class="+ topic/keyword pr-d/apiname keyword apiname">Custom</span> operator then parses a line (lines
10-18). The parsing is implemented with the <span class="+ topic/keyword pr-d/apiname keyword apiname">tokenize()</span> function
from the Standard Library (line 13), which accepts a string and a
pattern, and returns a list of strings that were separated by that pattern.
The string-list <kbd class="+ topic/ph sw-d/userinput ph userinput">tokens</kbd> contains the name as
its 0th item, the source number as its first item, and the destination
number as its second item (line 13). The Standard Library function <span class="+ topic/keyword pr-d/apiname keyword apiname">findFirst()</span> takes
a string to search as its first parameter, and a substring to search
for as its second parameter. It returns the index of the first location
if the substring is found within the first string parameter, or <kbd class="+ topic/ph sw-d/userinput ph userinput">-1</kbd> if
the substring is not found. In this case, if <kbd class="+ topic/ph sw-d/userinput ph userinput">540</kbd> is
the area code, then it must appear at index <kbd class="+ topic/ph sw-d/userinput ph userinput">0</kbd>.
A check is needed to see whether the result of the call to <span class="+ topic/keyword pr-d/apiname keyword apiname">findFirst()</span> is
equal to <kbd class="+ topic/ph sw-d/userinput ph userinput">0</kbd>, and then those tuples can be submitted
(lines 14-16). This SPL application correctly solves the stated problem,
but it is poor design for several reasons.</p>
<p class="- topic/p p">First, it is not obvious that there is a filter condition inside
of the <span class="+ topic/keyword pr-d/apiname keyword apiname">Custom</span> operator. Semantically, a call to
the <span class="+ topic/keyword pr-d/apiname keyword apiname">submit()</span> function that is protected by an if-statement
is the same as a filter. However, a reader must inspect the particular
logic of the <span class="+ topic/keyword pr-d/apiname keyword apiname">Custom</span> operator to discern this fact.
This approach is not declarative. Instead of specifying how to filter
tuples, it is better to state what the filter conditions can be. This <span class="+ topic/keyword pr-d/apiname keyword apiname">Custom</span> operator
also performs two tasks: it parses a line and it filters tuples. This
approach violates the principle that operators perform one task.</p>
<p class="- topic/p p">Second, the approach limits reuse in two ways. The logic in the <span class="+ topic/keyword pr-d/apiname keyword apiname">Custom</span> operator both parses
and filters. Parsers, operators that convert a raw data format to
SPL tuples, are a common operator pattern in <span class="- topic/keyword keyword">stream applications</span>.
They are also a particularly useful kind of operator that can be reused
in many applications. But, when logic specific to one application
is combined with the parsing itself, that operator is less useful
in other applications. There is also no longer an output stream with
all of the CDRs; the resultant output stream only contains CDRs from
the area code <kbd class="+ topic/ph sw-d/userinput ph userinput">540</kbd>. By separating parsing and
filtering, the output stream from the parsing operator has all CDRs.
It is then easier to write operators in the same application that
process all CDRs.</p>
<p class="- topic/p p">Performance is another consideration. streams application
are able to obtain high throughput through <dfn class="- topic/term term">pipeline parallelism</dfn>,
where two separate operators can process independent tuples in parallel.
As soon as each tuple is parsed, it is sent to the next operator where
the filtering can start. While the next operator is filtering, the
first operator can start parsing the next tuple. In more complex examples,
this design can lead to better throughput since the two operations
can occur in parallel. Combined operators cannot benefit from pipeline
parallelism.</p>
<p class="- topic/p p">The reason that the prior application is poor design from a performance
perspective is that it only can be two combined operators. Pipeline
parallelism is not possible in this application because the two tasks
were hardcoded into one large operator. Sometimes, combining two operators
does result in better performance. For those instances, the best method
is to request operator fusion through the <kbd class="+ topic/ph sw-d/userinput ph userinput">partitionColocation</kbd> requirement
that is part of the <span class="+ topic/keyword pr-d/parmname keyword parmname">placement</span> configuration option.</p>
<p class="- topic/p p">Without knowing more about the kinds of calls that the application processes, whether
fusion or pipeline parallelism yields higher throughput cannot be predicted.
If most of the calls are from the 540 area code, then pipeline parallelism most
likely yields better performance. However, if only a small fraction
of the calls come from the 540 area code, then fusion probably yields
better performance because it avoids sending unnecessary data downstream.
Therefore, it is better to write two separate operators, and then
use configuration options on those operators to tune their performance.</p>
<p class="- topic/p p">The <span class="- topic/keyword keyword">stream application</span> in the
next example exhibits appropriate operator granularity. The tuples
are filtered, as represented by the use of the <span class="+ topic/keyword pr-d/apiname keyword apiname">Filter</span> operator
(lines 18-20). This design is also more declarative; it provides what
the filter condition is, but it does not dictate how to apply it.
The flow of the application is now accurately represented by the stream
graph. Calls are read from a file that is represented as lines of
text, each line is parsed into a tuple, and calls not from the 540
area code are filtered out. Finally, by using the <span class="+ topic/keyword pr-d/parmname keyword parmname">placement</span> configuration
option, developers can choose to fuse the operators to avoid sending
unnecessary data, or to force them to operate separately to best use
pipeline parallelism. Consider this revision, which uses two operators:</p>
<div class="- topic/p p"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>01: composite Main {
02:   type CDR = rstring name, rstring src, rstring dest;
03:   graph
04:    stream&lt;rstring line&gt; RawLine = FileSource() {  
05:       param  
06:         file: "test.txt";  
07:         format: line;  
08:     }  
09: 
10:     stream&lt;CDR&gt; Processed = Custom(RawLine) { 
11:      logic 
12:         onTuple RawLine: { 
13:           list&lt;rstring&gt; tokens = tokenize(line, " ", false); 
14:           submit({name = tokens[0], src = tokens[1], dest = tokens[2]}); 
15:         } 
16:     } 
17: 
18:     stream&lt;CDR&gt; Filtered = Filter(Processed) { 
19:       param filter: findFirst(src, "540") == 0; 
20:     } 
21: }
</code></pre></div>
<p class="- topic/p p">There are circumstances where integrating multiple tasks in one
operator is the best choice. A general principle in streaming applications
is to filter data as soon as possible. While fusing two operators
can reduce communication costs, the operators still must create tuples.
In the first example, tuples that are not needed are not even created. If
the size of the tuples is large, and many are filtered, the code in
the first example can significantly outperform even a fused version
of the second example. However, code such optimizations that obscure
code intent and restrict code reuse only after discerning that there
is a significant performance benefit.</p>
</div>

</article></main></div>
                        
                        
                        <div class=" wh_related_links d-print-none "><nav aria-label="Related Links" role="navigation" class="- topic/related-links related-links"><div class="- topic/linklist linklist relref" xml:lang="en-us" lang="en-us"><strong>Related reference</strong><ul class="linklist related_link"><li class="linklist"><a class="- topic/link link navheader_parent_path" href="../../com.ibm.streams.ref.doc/doc/placementpartitioncolocation.html" title="placement : partitionColocation">placement : partitionColocation</a></li></ul></div></nav></div>
                        
                        <whc:webhelp_feedback xmlns="" xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="d-print-none"></whc:webhelp_feedback>
                        
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer" data-whc_version="23.1"> 

  <!--<whc:include_html href="${webhelp.fragment.footer}"/>-->
  
  <div class="footer-container">
    
    <div class="grid-container">
        
        
        <div class="hf"><h4 class="head">Teracloud Streams</h4>
          
          <p class="text-gray">Revolutionizing real-time data analytics with advanced tools, AI integration, and unparalleled expertise.</p></div>
        
        <div class="hs"><h4 class="head">Quick Links</h4>
          <a href="https://streams.teracloud.com" target="_blank" rel="noopener noreferrer" class="links blue">Official Website</a><br/>
            <a href="https://teracloud.com" target="_blank" rel="noopener noreferrer" class="links blue">About Teracloud</a><br/>
            <a href="https://teracloud.com/privacy" target="_blank" rel="noopener noreferrer" class="links blue">Privacy Policy</a>
          </div>
        
        <div class="ht"><h4 class="head">Contact Us</h4>
          
          <a href="mailto:info.streams@teracloud.com" class="text-gray2 links">info.streams@teracloud.com</a></div>
        
        
      
      <div class="bottom-row">Â© 2025 Teracloud. All rights reserved.</div></div>
  </div>

</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" alt=""/>
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>